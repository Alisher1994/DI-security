<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –°–∏—Å—Ç–µ–º–∞ –û—Ö—Ä–∞–Ω—ã</title>
    <link rel="stylesheet" href="/css/admin.css">
    <!-- Leaflet.js –¥–ª—è OpenStreetMap (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑ API –∫–ª—é—á–∞) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Yandex Maps (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=&lang=ru_RU" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div id="app" class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo-container">
                    <img src="/index.svg" alt="DI Security" class="sidebar-logo">
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-chart-no-axes-combined">
                            <path d="M12 16v5" />
                            <path d="M16 14v7" />
                            <path d="M20 10v11" />
                            <path d="m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15" />
                            <path d="M4 18v3" />
                            <path d="M8 14v7" />
                        </svg>
                    </span>
                    <span class="nav-text">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
                </a>
                <a href="#realtime" class="nav-item" data-page="realtime">
                    <span class="nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-map-plus">
                            <path
                                d="m11 19-1.106-.552a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0l4.212 2.106a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619V12" />
                            <path d="M15 5.764V12" />
                            <path d="M18 15v6" />
                            <path d="M21 18h-6" />
                            <path d="M9 3.236v15" />
                        </svg>
                    </span>
                    <span class="nav-text">–ö–∞—Ä—Ç–∞</span>
                </a>
                <a href="#scans" class="nav-item" data-page="scans">
                    <span class="nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-history">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                            <path d="M3 3v5h5" />
                            <path d="M12 7v5l4 2" />
                        </svg>
                    </span>
                    <span class="nav-text">–ò—Å—Ç–æ—Ä–∏—è</span>
                </a>
                <a href="#checkpoints" class="nav-item" data-page="checkpoints">
                    <span class="nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-map-pinned">
                            <path
                                d="M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0" />
                            <circle cx="12" cy="8" r="2" />
                            <path
                                d="M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712" />
                        </svg>
                    </span>
                    <span class="nav-text">–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏</span>
                </a>
                <a href="#employees" class="nav-item" data-page="employees">
                    <span class="nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-users-round">
                            <path d="M18 21a8 8 0 0 0-16 0" />
                            <circle cx="10" cy="8" r="5" />
                            <path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3" />
                        </svg>
                    </span>
                    <span class="nav-text">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</span>
                </a>

            </nav>

            <div class="support-info">
                <div class="support-label">‚öôÔ∏è –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞</div>
                <div class="support-text">–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —É–ª—É—á—à–µ–Ω–∏—è –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–±–æ—è:</div>
                <a href="https://t.me/alishermusayev94" target="_blank" class="support-link">
                    <span class="support-icon"><img src="/images/telegram_icon.png" alt="TG"
                            style="width: 18px; height: 18px; vertical-align: middle;"></span> Telegram
                </a>
                <a href="tel:+998994067406" class="support-link">
                    <span class="support-icon">üìû</span> +998 99 406 74 06
                </a>
                <div class="support-name">–ê–ª–∏—à–µ—Ä</div>
            </div>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">üë§</div>
                    <div class="user-info">
                        <div id="admin-name" class="user-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                        <div class="user-role">–ê–¥–º–∏–Ω</div>
                    </div>
                </div>
                <button id="logout-btn" class="btn-logout" title="–í—ã–π—Ç–∏">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-log-out">
                        <path d="m16 17 5-5-5-5" />
                        <path d="M21 12H9" />
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                    </svg>
                </button>
            </div>
            <div class="developer-info"
                style="padding: 0.75rem 1rem; text-align: center; border-top: 1px solid var(--border); font-size: 0.7rem; color: var(--text-muted); font-style: italic;">
                –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ YTT "MUSAYEV ALISHER"
            </div>
        </aside>

        <!-- Mobile Bottom Navigation -->
        <nav class="mobile-nav">
            <a href="#dashboard" class="mobile-nav-item nav-item active" data-page="dashboard">
                <span class="nav-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-chart-no-axes-combined">
                        <path d="M12 16v5" />
                        <path d="M16 14v7" />
                        <path d="M20 10v11" />
                        <path d="m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15" />
                        <path d="M4 18v3" />
                        <path d="M8 14v7" />
                    </svg>
                </span>
                <span class="nav-text">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
            </a>
            <a href="#realtime" class="mobile-nav-item nav-item" data-page="realtime">
                <span class="nav-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-map-plus">
                        <path
                            d="m11 19-1.106-.552a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0l4.212 2.106a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619V12" />
                        <path d="M15 5.764V12" />
                        <path d="M18 15v6" />
                        <path d="M21 18h-6" />
                        <path d="M9 3.236v15" />
                    </svg>
                </span>
                <span class="nav-text">–ö–∞—Ä—Ç–∞</span>
            </a>
            <a href="#scans" class="mobile-nav-item nav-item" data-page="scans">
                <span class="nav-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-history">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                        <path d="M3 3v5h5" />
                        <path d="M12 7v5l4 2" />
                    </svg>
                </span>
                <span class="nav-text">–ò—Å—Ç–æ—Ä–∏—è</span>
            </a>
            <a href="#checkpoints" class="mobile-nav-item nav-item" data-page="checkpoints">
                <span class="nav-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-map-pinned">
                        <path
                            d="M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0" />
                        <circle cx="12" cy="8" r="2" />
                        <path
                            d="M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712" />
                    </svg>
                </span>
                <span class="nav-text">–¢–æ—á–∫–∏</span>
            </a>
            <a href="#employees" class="mobile-nav-item nav-item" data-page="employees">
                <span class="nav-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-users-round">
                        <path d="M18 21a8 8 0 0 0-16 0" />
                        <circle cx="10" cy="8" r="5" />
                        <path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3" />
                    </svg>
                </span>
                <span class="nav-text">–õ—é–¥–∏</span>
            </a>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <div id="header-tab-actions" class="header-tab-actions">
                    <!-- Buttons will be toggled here -->
                    <div id="actions-dashboard" class="tab-actions" style="display: block;">
                        <button id="refresh-dashboard" class="btn btn-primary">
                            <span class="btn-icon">üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                        </button>
                    </div>

                    <div id="actions-realtime" class="tab-actions" style="display: none;">
                        <button id="refresh-map-header" class="btn btn-primary">
                            <span class="btn-icon">üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                        <button class="btn btn-primary" id="territory-btn-header">
                            <span class="btn-icon">üìê</span> –ì—Ä–∞–Ω–∏—Ü–∞
                        </button>
                        <button class="btn btn-primary" id="delete-territory-btn-header">
                            <span class="btn-icon">üóëÔ∏è</span> –£–¥–∞–ª–∏—Ç—å –∑–æ–Ω—É
                        </button>
                        <button id="add-checkpoint-map-header" class="btn btn-primary">
                            <span class="btn-icon">‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å QR
                        </button>
                    </div>

                    <div id="actions-scans" class="tab-actions" style="display: none;">
                        <button class="btn btn-primary toggle-filter-btn" data-table="scans">
                            <span class="btn-icon">üîç</span> –§–∏–ª—å—Ç—Ä
                        </button>
                        <button id="exportScansHeader" class="btn btn-primary">
                            <span class="btn-icon">üì•</span> –≠–∫—Å–ø–æ—Ä—Ç CSV
                        </button>
                    </div>

                    <div id="actions-checkpoints" class="tab-actions" style="display: none;">
                        <button id="bulk-qr-btn-header" class="btn btn-primary" onclick="showBulkQrModal()">
                            <span class="btn-icon">üñ®Ô∏è</span> –ü–µ—á–∞—Ç—å QR (–û–ø—Ç–æ–º)
                        </button>
                        <button id="addCheckpointHeader" class="btn btn-primary">
                            <span class="btn-icon">‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É
                        </button>
                    </div>

                    <div id="actions-employees" class="tab-actions" style="display: none;">
                        <button class="btn btn-primary toggle-filter-btn" data-table="employees">
                            <span class="btn-icon">üîç</span> –§–∏–ª—å—Ç—Ä
                        </button>
                        <button id="addEmployeeHeader" class="btn btn-primary">
                            <span class="btn-icon">‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                        </button>
                        <button id="exportEmployeesHeader" class="btn btn-primary">
                            <span class="btn-icon">üì•</span> –°–∫–∞—á–∞—Ç—å XLSX
                        </button>
                        <button id="downloadTemplateHeader" class="btn btn-primary">
                            <span class="btn-icon">üìÑ</span> –®–∞–±–ª–æ–Ω
                        </button>
                        <button id="importEmployeesBtnHeader" class="btn btn-primary">
                            <span class="btn-icon">üì§</span> –ò–º–ø–æ—Ä—Ç XLSX
                        </button>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="datetime" id="current-datetime"></div>
                </div>
                <!-- Mobile Logout Button -->
                <button id="mobile-logout-btn" class="btn-logout mobile-logout" title="–í—ã–π—Ç–∏">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-log-out">
                        <path d="m16 17 5-5-5-5" />
                        <path d="M21 12H9" />
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                    </svg>
                </button>
            </header>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page-content active">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">üìä</div>
                        <div class="stat-content">
                            <div class="stat-label">–í—Å–µ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
                            <div class="stat-value" id="totalScans">0</div>
                            <div class="stat-change positive">‚Üë –ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #059669);">üë•</div>
                        <div class="stat-content">
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                            <div class="stat-value" id="activeEmployees">0</div>
                            <div class="stat-change">–°–µ–≥–æ–¥–Ω—è –Ω–∞ —Å–º–µ–Ω–µ</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">üìç</div>
                        <div class="stat-content">
                            <div class="stat-label">–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Ç–æ—á–µ–∫</div>
                            <div class="stat-value" id="totalCheckpoints">0</div>
                            <div class="stat-change">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ—á–µ–∫</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üèÉ</div>
                        <div class="stat-content">
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ç—Ä—É–ª–µ–π</div>
                            <div class="stat-value" id="activePatrols">0</div>
                            <div class="stat-change">–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç</div>
                        </div>
                    </div>
                </div>





                <!-- Charts -->
                <div class="charts-grid-single">
                    <div class="chart-card">
                        <h3 class="chart-title">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</h3>
                        <canvas id="scansChart"></canvas>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="recent-activity">
                    <h3 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                    <div id="recentScans" class="activity-list"></div>
                </div>
            </div>

            <!-- Realtime Map Page -->
            <div id="realtime-page" class="page-content">
                <div class="map-header">
                    <div class="map-legend">
                        <div class="legend-item">
                            <span class="legend-icon" style="font-size: 1.2rem; margin-right: 0.5rem;">üëÆ</span>
                            <span>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (online)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-marker" style="background: #ef4444;"></span>
                            <span>–ö–ü–ü</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-marker" style="background: #10b981;"></span>
                            <span>–¢–æ—á–∫–∏ –ø–∞—Ç—Ä—É–ª—è</span>
                        </div>
                    </div>
                </div>
                <div id="realtime-map" class="admin-map"></div>
                <div class="active-patrols-list">
                    <h3 class="section-title">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ</h3>
                    <div id="activePatrolsList"></div>
                </div>
            </div>

            <!-- Scans History Page -->
            <div id="scans-page" class="page-content">
                <div class="table-controls">
                    <div class="filters">
                        <div class="preset-filters">
                            <select id="scanDatePreset" class="input-field" onchange="setScanDatePreset(this.value)">
                                <option value="">–ü–µ—Ä–∏–æ–¥...</option>
                                <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                <option value="yesterday">–í—á–µ—Ä–∞</option>
                                <option value="beforeYesterday">–ü–æ–∑–∞–≤—á–µ—Ä–∞</option>
                            </select>
                        </div>
                        <input type="date" id="scanFilterFrom" class="input-field" placeholder="–û—Ç">
                        <input type="date" id="scanFilterTo" class="input-field" placeholder="–î–æ">
                        <select id="scanFilterUser" class="input-field">
                            <option value="">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                        </select>
                        <button id="applyScanFilter" class="btn btn-secondary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                        <button id="clearScanFilter" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                </div>
                <div id="scansSummarySection" style="margin-bottom: 2rem; display: none;">
                    <h3 class="section-title">üìä –°–≤–æ–¥–∫–∞ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞)</h3>
                    <div class="table-container">
                        <table class="data-table" style="box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
                            <thead>
                                <tr>
                                    <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</th>
                                    <th>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                                    <th>–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏</th>
                                </tr>
                            </thead>
                            <tbody id="scansSummaryTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–î–∞—Ç–∞/–í—Ä–µ–º—è</th>
                                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                                <th>–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ç–æ—á–∫–∞</th>
                                <th>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–º)</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="scansTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Checkpoints Page -->
            <div id="checkpoints-page" class="page-content">
                <div class="cards-grid" id="checkpointsGrid"></div>
            </div>

            <!-- Employees Page -->
            <div id="employees-page" class="page-content">
                <input type="file" id="importFile" accept=".xlsx,.xls" style="display: none;">

                <div id="bulk-actions-bar" class="bulk-actions-bar" style="display: none;">
                    <span id="selected-count">–í—ã–±—Ä–∞–Ω–æ: 0</span>
                    <button id="bulk-deactivate" class="btn btn-danger btn-sm">–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö</button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 40px;"><input type="checkbox" id="selectAllEmployees"></th>
                                <th>ID</th>
                                <th>–§–ò–û</th>
                                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                <th>–†–æ–ª—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–∞—Ç–∞/–í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                            <tr id="employees-filter-row" class="filter-row">
                                <th></th>
                                <th><input type="text" id="filter-emp-id" placeholder="–§–∏–ª—å—Ç—Ä..." class="filter-input">
                                </th>
                                <th><input type="text" id="filter-emp-name" placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û..."
                                        class="filter-input"></th>
                                <th><input type="text" id="filter-emp-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω..."
                                        class="filter-input"></th>
                                <th>
                                    <select id="filter-emp-role" class="filter-input">
                                        <option value="">–í—Å–µ</option>
                                        <option value="admin">–ê–¥–º–∏–Ω</option>
                                        <option value="kpp">–ö–ü–ü</option>
                                        <option value="patrol">–ü–∞—Ç—Ä—É–ª—å</option>
                                    </select>
                                </th>
                                <th>
                                    <select id="filter-emp-status" class="filter-input">
                                        <option value="">–í—Å–µ</option>
                                        <option value="active">–ê–∫—Ç–∏–≤–µ–Ω</option>
                                        <option value="blocked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</option>
                                    </select>
                                </th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="employeesTableBody"></tbody>
                    </table>
                </div>
                <div id="employeesPagination" class="pagination-container"></div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="modalContainer"></div>

    <div id="bulkQrModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>–ü–µ—á–∞—Ç—å QR-–∫–æ–¥–æ–≤ (–û–ø—Ç–æ–º)</h2>
                <button class="close-modal" id="closeBulkQrModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="bulk-actions-bar">
                    <span id="bulk-qr-selected-count">–í—ã–±—Ä–∞–Ω–æ: 0</span>
                    <button id="download-selected-qrs" class="btn btn-primary">
                        <span class="btn-icon">üì•</span> –°–∫–∞—á–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ PDF
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;"><input type="checkbox" id="selectAllBulkQr" checked></th>
                                <th style="width: 150px;">–ö–∞—Ä—Ç–∞</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏</th>
                                <th>–¢–∏–ø</th>
                            </tr>
                        </thead>
                        <tbody id="bulkQrTableBody">
                            <!-- Rows will be dynamic -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Territory Edit Modal -->
    <div id="territoryModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏</h2>
                <button class="close-modal" id="closeTerritoryModal">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: var(--text-muted); font-size: 0.9rem;">
                    –ö–ª–∏–∫–∞–π—Ç–µ –ø–æ –∫–∞—Ä—Ç–µ, —á—Ç–æ–±—ã –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ—á–∫–∏ –≥—Ä–∞–Ω–∏—Ü. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –ø–æ —Ç–æ—á–∫–µ —É–¥–∞–ª—è–µ—Ç –µ—ë.
                    –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª.
                </p>
                <div id="territory-modal-map"
                    style="height: 500px; border-radius: 12px; border: 1px solid var(--border);"></div>
                <div class="form-actions" style="margin-top: 1.5rem; justify-content: flex-end;">
                    <button class="btn btn-secondary" id="cancel-territory" style="margin-right: 1rem;">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-danger" id="delete-territory-btn" style="margin-right: auto;">–£–¥–∞–ª–∏—Ç—å
                        –≤—Å—ë</button>
                    <button class="btn btn-success" id="save-territory-modal">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scan Timeline Modal -->
    <div id="scanTimelineModal" class="modal">
        <div class="modal-content" style="max-width: 1000px; width: 95%;">
            <div class="modal-header">
                <h2 id="timelineModalTitle">–ú–∞—Ä—à—Ä—É—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                <button class="close-modal" id="closeTimelineModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="timeline-container">
                    <div id="scanTimeline" class="timeline">
                        <!-- Timeline items will be dynamic -->
                    </div>
                </div>
                <div id="timeline-map"
                    style="height: 500px; border-radius: 12px; border: 1px solid var(--border); margin-top: 1rem;">
                </div>
            </div>
        </div>
    </div>

    <script src="/js/admin-app.js?v=3.2"></script>
</body>

</html>