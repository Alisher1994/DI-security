<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –°–∏—Å—Ç–µ–º–∞ –û—Ö—Ä–∞–Ω—ã</title>
    <link rel="stylesheet" href="/css/admin.css">
    <script src="https://api-maps.yandex.ru/2.1/?apikey=&lang=ru_RU" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div id="app" class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üõ°Ô∏è</span>
                    <span class="logo-text">–°–∏—Å—Ç–µ–º–∞ –û—Ö—Ä–∞–Ω—ã</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">–î–∞—à–±–æ—Ä–¥</span>
                </a>
                <a href="#realtime" class="nav-item" data-page="realtime">
                    <span class="nav-icon">üó∫Ô∏è</span>
                    <span class="nav-text">–ö–∞—Ä—Ç–∞ Realtime</span>
                </a>
                <a href="#scans" class="nav-item" data-page="scans">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">–ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</span>
                </a>
                <a href="#checkpoints" class="nav-item" data-page="checkpoints">
                    <span class="nav-icon">üìç</span>
                    <span class="nav-text">–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏</span>
                </a>
                <a href="#employees" class="nav-item" data-page="employees">
                    <span class="nav-icon">üë•</span>
                    <span class="nav-text">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</span>
                </a>

                <a href="#tracks" class="nav-item" data-page="tracks">
                    <span class="nav-icon">üõ£Ô∏è</span>
                    <span class="nav-text">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–∫–æ–≤</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">üë§</div>
                    <div class="user-info">
                        <div id="admin-name" class="user-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                        <div class="user-role">–ê–¥–º–∏–Ω</div>
                    </div>
                </div>
                <button id="logout-btn" class="btn-logout" title="–í—ã–π—Ç–∏">üö™</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <h1 id="page-title" class="page-title">–î–∞—à–±–æ—Ä–¥</h1>
                <div class="header-actions">
                    <div class="datetime" id="current-datetime"></div>
                </div>
            </header>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page-content active">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">üìä</div>
                        <div class="stat-content">
                            <div class="stat-label">–í—Å–µ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
                            <div class="stat-value" id="totalScans">0</div>
                            <div class="stat-change positive">‚Üë –ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #059669);">üë•</div>
                        <div class="stat-content">
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                            <div class="stat-value" id="activeEmployees">0</div>
                            <div class="stat-change">–°–µ–≥–æ–¥–Ω—è –Ω–∞ —Å–º–µ–Ω–µ</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">üìç</div>
                        <div class="stat-content">
                            <div class="stat-label">–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Ç–æ—á–µ–∫</div>
                            <div class="stat-value" id="totalCheckpoints">0</div>
                            <div class="stat-change">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ—á–µ–∫</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üèÉ</div>
                        <div class="stat-content">
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ç—Ä—É–ª–µ–π</div>
                            <div class="stat-value" id="activePatrols">0</div>
                            <div class="stat-change">–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç</div>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3 class="chart-title">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</h3>
                        <canvas id="scansChart"></canvas>
                    </div>

                    <div class="chart-card">
                        <h3 class="chart-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º —Ç–æ—á–µ–∫</h3>
                        <canvas id="checkpointTypesChart"></canvas>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="recent-activity">
                    <h3 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                    <div id="recentScans" class="activity-list"></div>
                </div>
            </div>

            <!-- Realtime Map Page -->
            <div id="realtime-page" class="page-content">
                <div class="map-controls">
                    <button id="refresh-map" class="btn btn-primary">
                        <span>üîÑ</span>
                        <span>–û–±–Ω–æ–≤–∏—Ç—å</span>
                    </button>
                    <div class="map-legend">
                        <div class="legend-item">
                            <span class="legend-icon" style="font-size: 1.2rem; margin-right: 0.5rem;">üëÆ</span>
                            <span>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ç—Ä—É–ª–∏</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-marker" style="background: #ef4444;"></span>
                            <span>–ö–ü–ü</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-marker" style="background: #10b981;"></span>
                            <span>–¢–æ—á–∫–∏ –ø–∞—Ç—Ä—É–ª—è</span>
                        </div>
                    </div>
                </div>
                <div id="realtime-map" class="admin-map"></div>
                <div class="active-patrols-list">
                    <h3 class="section-title">–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ç—Ä—É–ª–∏</h3>
                    <div id="activePatrolsList"></div>
                </div>
            </div>

            <!-- Scans History Page -->
            <div id="scans-page" class="page-content">
                <div class="table-controls">
                    <div class="filters">
                        <input type="date" id="scanFilterFrom" class="input-field" placeholder="–û—Ç">
                        <input type="date" id="scanFilterTo" class="input-field" placeholder="–î–æ">
                        <select id="scanFilterUser" class="input-field">
                            <option value="">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                        </select>
                        <button id="applyScanFilter" class="btn btn-secondary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                        <button id="clearScanFilter" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                    <button id="exportScans" class="btn btn-primary">üì• –≠–∫—Å–ø–æ—Ä—Ç CSV</button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–î–∞—Ç–∞/–í—Ä–µ–º—è</th>
                                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                                <th>–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ç–æ—á–∫–∞</th>
                                <th>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–º)</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="scansTableBody"></tbody>
                    </table>
                </div>
                <div class="pagination" id="scansPagination"></div>
            </div>

            <!-- Checkpoints Page -->
            <div id="checkpoints-page" class="page-content">
                <div class="page-actions">
                    <button id="addCheckpoint" class="btn btn-success">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É</button>
                </div>
                <div class="cards-grid" id="checkpointsGrid"></div>
            </div>

            <!-- Employees Page -->
            <div id="employees-page" class="page-content">
                <div class="page-actions">
                    <button id="addEmployee" class="btn btn-success">+ –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>
                    <div class="action-group">
                        <button id="exportEmployees" class="btn btn-primary">üì• –°–∫–∞—á–∞—Ç—å XLSX</button>
                        <button id="downloadTemplate" class="btn btn-secondary">üìÑ –®–∞–±–ª–æ–Ω –∏–º–ø–æ—Ä—Ç–∞</button>
                        <button id="importEmployeesBtn" class="btn btn-warning">üì§ –ò–º–ø–æ—Ä—Ç –∏–∑ XLSX</button>
                        <input type="file" id="importFile" accept=".xlsx,.xls" style="display: none;">
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–§–ò–û</th>
                                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                <th>–†–æ–ª—å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="employeesTableBody"></tbody>
                    </table>
                </div>
            </div>



            <!-- Tracks History Page -->
            <div id="tracks-page" class="page-content">
                <div class="table-controls">
                    <div class="filters">
                        <select id="trackFilterUser" class="input-field">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ç—Ä—É–ª—å–Ω–æ–≥–æ</option>
                        </select>
                        <input type="date" id="trackFilterDate" class="input-field">
                        <button id="viewTrack" class="btn btn-primary">–ü–æ–∫–∞–∑–∞—Ç—å –ø—É—Ç—å</button>
                    </div>
                </div>
                <div id="history-map" class="admin-map"></div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>–°–µ—Å—Å–∏—è</th>
                                <th>–ù–∞—á–∞–ª–æ</th>
                                <th>–ö–æ–Ω–µ—Ü</th>
                                <th>–î–∏—Å—Ç–∞–Ω—Ü–∏—è</th>
                                <th>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="sessionsTableBody"></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals will be added dynamically -->
    <div id="modalContainer"></div>

    <script src="/js/admin-app.js"></script>
</body>

</html>