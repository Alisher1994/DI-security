<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–°–∏—Å—Ç–µ–º–∞ –û—Ö—Ä–∞–Ω—ã - –°–æ—Ç—Ä—É–¥–Ω–∏–∫</title>
    <link rel="stylesheet" href="/css/employee.css">
    <script src="https://api-maps.yandex.ru/2.1/?apikey=&lang=ru_RU" type="text/javascript"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>

<body>
    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <div class="logo">
                <div class="shield-icon">üõ°Ô∏è</div>
                <h1>–°–∏—Å—Ç–µ–º–∞ –û—Ö—Ä–∞–Ω—ã</h1>
            </div>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                <div id="login-error" class="error-message"></div>
            </form>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="main-screen" class="screen">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="user-info">
                    <div class="user-avatar">
                        <span id="user-initials">üë§</span>
                    </div>
                    <div class="user-details">
                        <div id="user-name" class="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <div id="user-role" class="user-role"></div>
                    </div>
                </div>
                <button id="logout-btn" class="btn-icon" title="–í—ã–π—Ç–∏">
                    <span>üö™</span>
                </button>
            </div>
        </header>



        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—Ä—É–ª–µ–º (—Ç–æ–ª—å–∫–æ –¥–ª—è patrol) -->
        <section id="patrol-controls" class="patrol-controls" style="display: none;">
            <div class="control-card">
                <h2 class="section-title">–ü–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
                <div id="session-inactive" class="session-state">
                    <div class="session-icon">üö∂</div>
                    <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                    <button id="start-patrol-btn" class="btn btn-success btn-large">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        <span>–ù–∞—á–∞—Ç—å –ø–∞—Ç—Ä—É–ª—å</span>
                    </button>
                </div>
                <div id="session-active" class="session-state" style="display: none;">
                    <div class="session-icon active">üèÉ</div>
                    <p>–ü–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ</p>
                    <div class="session-stats">
                        <div class="stat-item">
                            <div class="stat-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                            <div id="session-duration" class="stat-value">00:00:00</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
                            <div id="session-scans" class="stat-value">0</div>
                        </div>
                    </div>
                    <button id="stop-patrol-btn" class="btn btn-danger btn-large">
                        <span class="btn-icon">‚èπÔ∏è</span>
                        <span>–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–∞—Ç—Ä—É–ª—å</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- QR Scanner -->
        <section class="scanner-section">
            <div class="control-card">
                <h2 class="section-title">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞</h2>
                <button id="scan-qr-btn" class="btn btn-primary btn-large" disabled>
                    <span class="btn-icon">üì∑</span>
                    <span>–û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥</span>
                </button>
                <div id="scan-result" class="scan-result"></div>
            </div>
        </section>

        <!-- –ö–∞—Ä—Ç–∞ (–¥–ª—è patrol) -->
        <section id="map-section" class="map-section" style="display: none;">
            <div class="control-card">
                <h2 class="section-title">–ú–æ—è –ø–æ–∑–∏—Ü–∏—è</h2>
                <div id="map" class="map-container"></div>
                <div class="location-info">
                    <div class="location-item">
                        <span class="label">GPS —Ç–æ—á–Ω–æ—Å—Ç—å:</span>
                        <span id="gps-accuracy" class="value">--</span>
                    </div>
                    <div class="location-item">
                        <span class="label">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</span>
                        <span id="last-update" class="value">--</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- –ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π -->
        <section class="history-section">
            <div class="control-card">
                <h2 class="section-title">–ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</h2>
                <div id="scan-history" class="scan-history"></div>
            </div>
        </section>


    </div>

    <!-- QR Scanner Modal -->
    <div id="qr-scanner-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞</h2>
                <button class="modal-close" id="close-scanner">‚úï</button>
            </div>
            <div class="modal-body">
                <div id="qr-reader"></div>
                <div class="manual-input">
                    <p>–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≤—Ä—É—á–Ω—É—é:</p>
                    <input type="text" id="manual-qr-input" placeholder="–í–≤–µ–¥–∏—Ç–µ QR-–∫–æ–¥">
                    <button id="manual-qr-submit" class="btn btn-secondary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/employee-app.js"></script>
</body>

</html>