<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO LOGISTICS - –û–ø–µ—Ä–∞—Ç–æ—Ä</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="admin-container">
        <div class="admin-header">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∫–æ–º</h2>
            <div class="user-info">–î–∏—Å–ø–µ—Ç—á–µ—Ä #1</div>
        </div>

        <div class="admin-content" id="main-content">

            <!-- VIEW: Garage (Own Fleet) -->
            <div id="view-garage" class="tab-view">
                <button class="btn-primary" style="margin-bottom:16px;" onclick="openAddForm('garage')">
                    + –î–æ–±–∞–≤–∏—Ç—å –≤ –ì–∞—Ä–∞–∂
                </button>

                <!-- Own Fleet List -->
                <div class="admin-card" style="margin-top:20px;">
                    <h3>–ú–æ–π –ì–∞—Ä–∞–∂</h3>
                    <div id="garage-list" class="fleet-list"></div>
                </div>
            </div>

            <!-- VIEW: Subcontractors -->
            <div id="view-subcontractor" class="tab-view hidden">
                <button class="btn-primary" style="margin-bottom:16px; background-color:#e0e0e0;"
                    onclick="openAddForm('subcontractor')">
                    + –î–æ–±–∞–≤–∏—Ç—å –°—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫–∞
                </button>

                <div id="subcontractor-list">
                    <!-- Javascript will populate this -->
                </div>
            </div>

            <!-- VIEW: Categories -->
            <div id="view-categories" class="tab-view hidden">
                <div class="admin-card">
                    <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Ö–Ω–∏–∫–∏</h3>
                    <div class="add-category-row">
                        <!-- Custom Emoji Dropdown -->
                        <div class="custom-dropdown" id="emoji-dropdown">
                            <div class="dropdown-trigger" id="emoji-trigger" onclick="toggleEmojiDropdown()">üöú</div>
                            <div class="dropdown-options hidden" id="emoji-options">
                                <div class="emoji-option" onclick="selectEmoji('üöú')">üöú</div>
                                <div class="emoji-option" onclick="selectEmoji('üöõ')">üöõ</div>
                                <div class="emoji-option" onclick="selectEmoji('üèóÔ∏è')">üèóÔ∏è</div>
                                <div class="emoji-option" onclick="selectEmoji('üöê')">üöê</div>
                                <div class="emoji-option" onclick="selectEmoji('üöô')">üöô</div>
                                <div class="emoji-option" onclick="selectEmoji('üöå')">üöå</div>
                                <div class="emoji-option" onclick="selectEmoji('ü™ú')">ü™ú</div>
                                <div class="emoji-option" onclick="selectEmoji('üõë')">üõë</div>
                                <div class="emoji-option" onclick="selectEmoji('üöß')">üöß</div>
                                <div class="emoji-option" onclick="selectEmoji('üõ†Ô∏è')">üõ†Ô∏è</div>
                            </div>
                        </div>

                        <input type="text" id="new-cat-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" class="cat-name-input">
                        <button class="btn-primary btn-add" onclick="addCategory()">+</button>
                    </div>
                    <div id="categories-list" class="fleet-list"></div>
                </div>
            </div>

            <!-- VIEW: Profile -->
            <div id="view-profile" class="tab-view hidden">
                <div class="admin-card">
                    <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
                    <div class="form-group">
                        <label>–ò–º—è</label>
                        <input type="text" value="–î–∏—Å–ø–µ—Ç—á–µ—Ä #1" readonly>
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="text" value="+7 999 000-00-00" readonly>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('garage')">
            <div class="nav-icon"><i data-lucide="warehouse"></i></div>
            <div class="nav-label">–ì–∞—Ä–∞–∂</div>
        </div>
        <div class="nav-item" onclick="switchTab('subcontractor')">
            <div class="nav-icon"><i data-lucide="handshake"></i></div>
            <div class="nav-label">–°—É–±–ø–æ–¥—Ä—è–¥</div>
        </div>
        <div class="nav-item" onclick="switchTab('categories')">
            <div class="nav-icon"><i data-lucide="list"></i></div>
            <div class="nav-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
        </div>
        <div class="nav-item" onclick="switchTab('profile')">
            <div class="nav-icon"><i data-lucide="user"></i></div>
            <div class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
    </div>

    <!-- Modal Backdrop -->
    <div id="modal-backdrop" class="modal-backdrop hidden" onclick="closeAddForm()"></div>

    <!-- Add Machine Modal Bottom Sheet -->
    <div id="add-form-container" class="bottom-sheet-modal">
        <div class="sheet-header">
            <h3>–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É</h3>
            <button onclick="closeAddForm()"
                style="background:none; border:none; font-size:24px; color:#999;">&times;</button>
        </div>

        <div class="sheet-content">
            <div class="form-group">
                <label>–¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏</label>
                <select id="new-machine-type">
                    <option value="Excavator">–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä</option>
                    <option value="Crane">–ê–≤—Ç–æ–∫—Ä–∞–Ω</option>
                    <option value="Truck">–°–∞–º–æ—Å–≤–∞–ª</option>
                </select>
            </div>
            <!-- Ownership toggle hidden via JS when opened from specific button -->
            <div class="form-group ownership-toggle">
                <label>–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å</label>
                <div>
                    <label><input type="radio" name="ownership" value="own" checked onchange="togglePartnerField()">
                        –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π</label>
                    <label><input type="radio" name="ownership" value="partner" onchange="togglePartnerField()">
                        –°—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫</label>
                </div>
            </div>
            <div class="form-group hidden" id="partner-field-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞</label>
                <input type="text" id="partner-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏">
            </div>
            <div class="form-group">
                <label>–ú–æ–¥–µ–ª—å / –ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="new-machine-name" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, JCB 4CX">
            </div>
            <div class="form-group">
                <label>–ì–æ—Å–Ω–æ–º–µ—Ä</label>
                <input type="text" id="new-machine-plate" placeholder="A 000 AA 777">
            </div>
            <div class="form-group">
                <label>–¢–∞—Ä–∏—Ñ</label>
                <select id="pricing-type" style="margin-bottom:10px;" onchange="updatePricingFields()">
                    <option value="hour">–¢–æ–ª—å–∫–æ –ú–∞—à/—á–∞—Å</option>
                    <option value="trip">–¢–æ–ª—å–∫–æ –†–µ–π—Å</option>
                    <option value="both">–ú–∞—à/—á–∞—Å + –†–µ–π—Å</option>
                </select>
            </div>

            <div id="price-hour-group" class="form-group">
                <label>–¶–µ–Ω–∞ –∑–∞ –º–∞—à/—á–∞—Å (—Å—É–º)</label>
                <input type="number" id="price-hour" placeholder="–¶–µ–Ω–∞ –∑–∞ —á–∞—Å (—Å—É–º)">
                <div style="margin-top:8px; display: flex; align-items: center; gap: 10px;">
                    <label style="font-size:12px; color:#666; margin-bottom: 0; white-space: nowrap;">–ú–∏–Ω. –∑–∞–∫–∞–∑
                        (–º–∞—à/—á–∞—Å):</label>
                    <input type="number" id="min-hours" value="3" min="1" style="width: 70px; padding: 6px;">
                </div>
            </div>

            <div id="price-trip-group" class="form-group hidden">
                <label>–¶–µ–Ω–∞ –∑–∞ —Ä–µ–π—Å (—Å—É–º)</label>
                <input type="number" id="price-trip" placeholder="–¶–µ–Ω–∞ –∑–∞ —Ä–µ–π—Å (—Å—É–º)">
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="delivery-check" onchange="toggleDeliveryField()">
                    –î–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –º–∞—à–∏–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ø–µ—Ü—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç?
                </label>
            </div>
            <div class="form-group hidden" id="delivery-field-group">
                <label>–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∑–∞ 1 –∫–º</label>
                <input type="number" id="delivery-cost" placeholder="–¶–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∑–∞ 1 –∫–º (—Å—É–º)">
            </div>
            <button class="btn-primary" id="add-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <div style="height:20px;"></div>
        </div>
    </div>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Init icons
        if (window.lucide) {
            lucide.createIcons();
        } else {
            /* Fallback or retry? Mostly just wait for load if async, but script is synchronous here. */
            document.addEventListener('DOMContentLoaded', () => {
                if (window.lucide) lucide.createIcons();
            });
        }
    </script>
</body>

</html>
