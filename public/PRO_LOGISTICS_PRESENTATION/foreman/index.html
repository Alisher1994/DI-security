<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PRO LOGISTICS - –ü—Ä–æ—Ä–∞–±</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <!-- Remix Icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <!-- Leaflet Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- Main Style -->
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- App Container -->
    <div id="app" class="full-height">
        <!-- Map Container -->
        <div id="map" style="height: 100%; width: 100%; z-index: 1;"></div>

        <!-- Fixed Center Marker (Overlay) -->
        <div id="fixed-marker" class="fixed-marker">
            <div class="marker-content">
                <div class="marker-sign">–í—ã –∑–¥–µ—Å—å</div>
                <div class="marker-stick"></div>
            </div>
            <!-- Radar Rings (Hidden by default, shown when searching) -->
            <div class="radar-ring"></div>
            <div class="radar-ring delay-1"></div>

            <div class="marker-shadow"></div>
        </div>

        <!-- Top Search Bar (Floating) -->
        <div class="top-bar-container">
            <div class="top-bar" id="search-bar-to">
                <div
                    style="background:white; padding:12px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); display:flex; gap:10px; align-items:center; flex:1;">
                    <span style="color:green; font-weight:700;">‚óè</span>
                    <span id="address-to" style="font-size:14px; font-weight:500;">–ö—É–¥–∞ –ø–æ–¥–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫—É?</span>
                </div>
            </div>
            <!-- Search From (Cargo only) -->
            <div class="top-bar hidden mt-2" id="search-bar-from">
                <div
                    style="background:white; padding:12px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); display:flex; gap:10px; align-items:center; flex:1;">
                    <span style="color:red; font-weight:700;">‚óè</span>
                    <span style="font-size:14px; font-weight:500;">–û—Ç–∫—É–¥–∞ –∑–∞–±—Ä–∞—Ç—å?</span>
                </div>
            </div>
        </div>

        <!-- GPS Button -->
        <div class="gps-btn" onclick="locateUser()">
            üîò
        </div>

        <!-- Bottom Sheet -->
        <div class="bottom-sheet">
            <div class="sheet-handle"></div>

            <!-- Step 0: Mode Selection -->
            <div id="step-mode">
                <h3 style="margin-bottom:16px;">–ß—Ç–æ –∑–∞–∫–∞–∑—ã–≤–∞–µ–º?</h3>
                <div class="mode-cards">
                    <div class="mode-card" onclick="selectMode('special')">
                        <div class="mode-icon">üöú</div>
                        <div class="mode-title">–°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞</div>
                        <div class="mode-desc">–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä—ã, –ö—Ä–∞–Ω—ã</div>
                    </div>
                    <div class="mode-card" onclick="selectMode('cargo')">
                        <div class="mode-icon">üöõ</div>
                        <div class="mode-title">–ì—Ä—É–∑–æ–≤–æ–π</div>
                        <div class="mode-desc">–ü–µ—Ä–µ–≤–æ–∑–∫–∏, –®–∞–ª–∞–Ω–¥—ã</div>
                    </div>
                </div>
            </div>

            <!-- Step 1: Category Selection -->
            <div id="step-category" class="hidden">
                <div style="display:flex; align-items:center; margin-bottom:12px;">
                    <div class="back-btn" onclick="showStep('mode')" style="margin-right:10px; cursor:pointer;">
                        <i class="ri-arrow-left-line" style="font-size:20px;"></i>
                    </div>
                    <h3 id="category-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
                </div>

                <!-- Address Summary Block -->
                <div class="address-summary">
                    <div class="address-icon-small">üìç</div>
                    <div class="address-details">
                        <div class="address-label">–ê–¥—Ä–µ—Å –ø–æ–¥–∞—á–∏</div>
                        <div class="address-value">–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ê–º–∏—Ä–∞ –¢–µ–º—É—Ä–∞, 1</div>
                    </div>
                    <div class="address-edit">‚úèÔ∏è</div>
                </div>

                <div class="equipment-slider" id="category-slider">
                    <!-- Javascript will populate this -->
                </div>
                <div class="order-actions">
                    <button class="btn-primary" id="btn-next" disabled>
                        –î–∞–ª–µ–µ
                    </button>
                </div>
            </div>

            <!-- Step 2: Machine Selection -->
            <div id="step-machine" class="hidden">
                <div style="display:flex; align-items:center; margin-bottom:12px;">
                    <div class="back-btn" onclick="showStep('category')" style="margin-right:10px; cursor:pointer;">
                        <i class="ri-arrow-left-line" style="font-size:20px;"></i>
                    </div>
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É</h3>
                </div>

                <div class="equipment-slider" id="machine-slider">
                    <!-- Javascript will populate this -->
                </div>

                <div class="order-actions">
                    <button class="btn-primary" id="btn-to-form" disabled>
                        –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é
                    </button>
                </div>
            </div>

            <!-- Step 3: Order Form -->
            <div id="step-form" class="hidden">
                <div style="display:flex; align-items:center; margin-bottom:12px;">
                    <div class="back-btn" onclick="showStep('machine')" style="margin-right:10px; cursor:pointer;">
                        <i class="ri-arrow-left-line" style="font-size:20px;"></i>
                    </div>
                    <h3>–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h3>
                </div>

                <div class="form-container">
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                        <input type="date" class="form-input" id="order-date">
                    </div>
                    <div class="form-group">
                        <label>–í—Ä–µ–º—è –ø–æ–¥–∞—á–∏</label>
                        <input type="time" class="form-input" id="order-time">
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                        <textarea class="form-input" id="order-comment" rows="2"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≤—ä–µ–∑–¥ —á–µ—Ä–µ–∑ –∞—Ä–∫—É..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
                        <div class="payment-options">
                            <div class="payment-option active" onclick="selectPayment('cash', this)">
                                üíµ –ù–∞–ª–∏—á–Ω—ã–µ
                            </div>
                            <div class="payment-option" onclick="selectPayment('card', this)">
                                üí≥ –ö–∞—Ä—Ç–∞
                            </div>
                            <div class="payment-option" onclick="selectPayment('transfer', this)">
                                üè¶ –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ
                            </div>
                        </div>
                    </div>
                </div>

                <div class="order-actions">
                    <button class="btn-primary" id="btn-order">
                        –ó–∞–∫–∞–∑–∞—Ç—å
                    </button>
                </div>
            </div>

            <!-- Step 4: Search -->
            <div id="step-search" class="hidden" style="text-align: center; padding: 20px 0;">
                <h3 style="margin-bottom: 8px;">–ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π...</h3>
                <p style="color: #777; font-size: 13px; margin-bottom: 24px;">
                    –ú—ã –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑
                    <span style="color: #000; font-weight: 600;">5</span> –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º —Ä—è–¥–æ–º
                </p>

                <button class="btn-primary" style="background:#f2f2f2; color:#000;" onclick="cancelSearch()">
                    –û—Ç–º–µ–Ω–∏—Ç—å
                </button>
            </div>

            <!-- Step 5: Found / Active Order -->
            <div id="step-found" class="hidden">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                    <div>
                        <div style="font-size:18px; font-weight:700;">–ß–µ—Ä–µ–∑ 15 –º–∏–Ω</div>
                        <div style="font-size:13px; color:#777;">–í–æ–¥–∏—Ç–µ–ª—å –≤ –ø—É—Ç–∏</div>
                    </div>
                    <div
                        style="background:#f0f0f0; padding:6px 10px; border-radius:8px; font-size:12px; font-weight:600;">
                        350 000 —Å—É–º/—á
                    </div>
                </div>

                <!-- Driver Card -->
                <div class="driver-card">
                    <div class="driver-info">
                        <div class="driver-avatar">üßîüèª‚Äç‚ôÇÔ∏è</div>
                        <div>
                            <div class="driver-name">–ê–ª–∏—à–µ—Ä –í.</div>
                            <div class="driver-rating">‚≠ê 4.9 (142 –∑–∞–∫–∞–∑–∞)</div>
                        </div>
                    </div>
                    <div class="machine-info-badge">
                        üöú JCB 3CX Super
                        <div style="font-size:11px; color:#555; margin-top:2px;">01 A 777 AA</div>
                    </div>
                </div>

                <div class="order-actions" style="flex-direction:row;">
                    <button class="btn-primary" style="background:#4CAF50; color:white; flex:1;">
                        üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                    </button>
                    <button class="btn-primary" style="background:#f2f2f2; color:black; flex:1;">
                        üí¨ –ß–∞—Ç
                    </button>
                </div>

                <div style="text-align:center; margin-top:12px;">
                    <span style="color:#d32f2f; font-size:13px; font-weight:500; cursor:pointer;"
                        onclick="cancelSearch()">–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Logic -->
    <script src="script.js"></script>
</body>

</html>
