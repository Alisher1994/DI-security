<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO LOGISTICS | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–æ–π</title>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Inter:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- Leaflet Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        /* CSS Variables & Global */
        :root {
            --primary: #ff3b30;
            /* Premium Red */
            --primary-glow: rgba(255, 59, 48, 0.4);
            --dark: #000000;
            --dark-card: #0f0f0f;
            --text-light: #ffffff;
            --text-gray: #9e9e9e;
            --glass: rgba(255, 255, 255, 0.02);
            --glass-border: rgba(255, 255, 255, 0.05);
            --glow: 0 0 30px var(--primary-glow);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--dark);
            color: var(--text-light);
            overflow-x: hidden;
            scroll-behavior: smooth;
            cursor: none;
            /* Custom Scrollbar Width for Firefox */
            scrollbar-width: thin;
            scrollbar-color: #333 #0a0a0a;
        }

        /* Custom Custom Radar Cursor */
        #radar-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            pointer-events: none;
            z-index: 999999;
            transform: translate(-50%, -50%);
            mix-blend-mode: difference;
        }

        .radar-dot {
            width: 14px;
            height: 14px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        }

        .radar-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 400px;
            border: 1px solid rgba(255, 59, 48, 0.15);
            border-radius: 50%;
            animation: radar-ping 3s infinite;
        }

        @keyframes radar-ping {
            0% {
                width: 0;
                height: 0;
                opacity: 0.3;
            }

            100% {
                width: 400px;
                height: 400px;
                opacity: 0;
            }
        }

        /* Sidebar Navigation */
        .side-nav {
            position: fixed;
            bottom: 40px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 9999;
        }

        .nav-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .nav-btn:hover {
            color: var(--primary);
            border-color: var(--primary);
            background: rgba(255, 59, 48, 0.1);
        }

        .nav-btn.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .nav-hint {
            position: absolute;
            right: 60px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            white-space: nowrap;
            border: 1px solid rgba(255, 59, 48, 0.3);
            animation: hint-bounce 2s infinite;
        }

        @keyframes hint-bounce {

            0%,
            100% {
                transform: translateY(-50%) translateX(0);
            }

            50% {
                transform: translateY(-50%) translateX(-5px);
            }
        }

        /* Custom Scrollbar (Webkit) */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
            border: 2px solid #0a0a0a;
            /* Padding effect */
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
            /* Primary Yellow on Hover */
        }

        /* TURBO LOADER */
        .turbo-loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            z-index: 100000;
            background: rgba(255, 255, 255, 0.05);
        }

        .turbo-loader-bar {
            height: 100%;
            width: 0%;
            background: var(--primary);
            box-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary);
            transition: width 0.1s ease-out;
            border-radius: 0 2px 2px 0;
        }

        /* INTRO OVERLAY STYLES */
        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #000;
            z-index: 99999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease-in-out, visibility 0.8s;
        }

        .intro-slider-wrapper {
            width: 100%;
            height: 300px;
            overflow: hidden;
            position: relative;
            /* Fade edges */
            mask-image: linear-gradient(to right, transparent 0%, black 20%, black 80%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, transparent 0%, black 20%, black 80%, transparent 100%);
            display: flex;
            align-items: center;
        }

        .intro-track {
            display: flex;
            align-items: center;
            padding-left: 50vw;
            /* Start roughly center to allow negative transform relative to it */
            will-change: transform;
        }

        .intro-block {
            flex: 0 0 auto;
            width: 280px;
            height: 140px;
            margin: 0 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 1.5rem;
            color: #444;
            background: rgba(255, 255, 255, 0.03);
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            position: relative;
            gap: 15px;
            /* Space between icon and text */
        }

        .intro-block.active {
            color: #000;
            border-color: var(--primary);
            background: var(--primary);
            transform: scale(1.15);
            box-shadow: 0 0 50px rgba(255, 59, 48, 0.4);
            z-index: 10;
        }

        .intro-block.pressed {
            transform: scale(0.95) !important;
            filter: brightness(1.2);
            box-shadow: 0 0 20px rgba(255, 59, 48, 0.7);
        }

        /* Fullscreen Trigger Styles */
        #fs-trigger {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #000;
            z-index: 100000;
            /* Above everything */
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: opacity 0.5s;
        }

        .fs-btn {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            animation: pulse-ring 2s infinite;
            text-align: center;
        }

        .fs-text {
            font-size: 0.8rem;
            letter-spacing: 2px;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            animation: text-blink 3s infinite;
        }

        @keyframes pulse-ring {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.4);
                border-color: rgba(255, 59, 48, 0.4);
            }

            70% {
                box-shadow: 0 0 0 20px rgba(255, 59, 48, 0);
                border-color: rgba(255, 255, 255, 0.1);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 59, 48, 0);
            }
        }

        @keyframes text-blink {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 0.8;
            }
        }

        .intro-label {
            position: absolute;
            top: -50px;
            color: #666;
            font-size: 0.9rem;
            letter-spacing: 2px;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .active .intro-label {
            opacity: 1;
        }

        h1,
        h2,
        h3 {
            font-family: 'Outfit', sans-serif;
            font-weight: 800;
        }

        /* Hero */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            background: var(--dark);
            padding: 20px;
            overflow: hidden;
        }

        .hero-video-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: 0;
            transform: translate(-50%, -50%);
            opacity: 0.15;
            object-fit: cover;
            pointer-events: none;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 8vw, 5.5rem);
            margin-bottom: 10px;
            letter-spacing: -2px;

            /* Glossy Gradient */
            background: linear-gradient(110deg,
                    #888 0%,
                    #fff 10%,
                    #888 20%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;

            animation: glossy-shine 5s linear infinite;
        }

        .hero p {
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            color: var(--text-gray);
            max-width: 800px;
            line-height: 1.6;
        }

        @keyframes glossy-shine {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        /* Generic Section */
        section {
            padding: 120px 5%;
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            align-items: center;
        }

        @media (max-width: 968px) {
            .container {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 40px;
            }
        }

        .content-text h2 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 25px;
            line-height: 1.1;
            letter-spacing: -1px;
        }

        .content-text p {
            font-size: 1.15rem;
            color: var(--text-gray);
            line-height: 1.7;
            margin-bottom: 35px;
        }

        .feature-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 0.9rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        /* Feature Pills */
        .feature-pill {
            display: grid;
            grid-template-columns: 60px 1fr;
            align-items: center;
            gap: 20px;
            margin-bottom: 12px;
            background: #0d0d0d;
            padding: 20px 25px;
            border-radius: 14px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.03);
            text-align: left;
            transition: all 0.3s ease;
        }

        .feature-pill:hover {
            background: #121212;
            transform: translateX(5px);
            border-color: rgba(255, 59, 48, 0.2);
        }

        .feature-pill::before {
            content: '';
            position: absolute;
            left: 0;
            top: 20%;
            height: 60%;
            width: 4px;
            background: var(--primary);
            box-shadow: 0 0 15px var(--primary);
            border-radius: 0 4px 4px 0;
        }

        .feature-pill .icon-box {
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--primary);
            filter: drop-shadow(0 0 5px var(--primary-glow));
            font-size: 24px;
        }

        .os-support {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            margin-top: -10px;
        }

        .os-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            padding: 8px 15px;
            border-radius: 12px;
            font-size: 0.85rem;
            color: var(--text-gray);
            transition: all 0.3s ease;
        }

        .os-badge:hover {
            border-color: var(--primary);
            background: rgba(255, 59, 48, 0.05);
            color: #fff;
        }

        /* Mockup Effects */
        .mockup-container {
            position: relative;
        }

        .mockup-img {
            width: 100%;
            border-radius: 24px;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.8);
            border: 1px solid var(--glass-border);
        }

        .floating {
            animation: floating 6s ease-in-out infinite;
        }

        @keyframes floating {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-25px) rotate(1deg);
            }
        }

        /* Stats */
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 50px;
        }

        .stat-item h4 {
            font-size: 2rem;
            color: var(--primary);
        }

        .stat-item p {
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        /* --- INTERACTIVE SHOWCASE STYLES --- */
        .phone-wrapper {
            position: relative;
            padding: 20px;
        }

        .phone-mockup {
            width: 320px;
            height: 650px;
            background: #111;
            border: 14px solid #1a1a1a;
            border-radius: 45px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 50px 100px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 59, 48, 0.1);
            z-index: 2;
        }

        .phone-mockup iframe {
            width: 111.11%;
            height: 111.11%;
            border: none;
            background: #000;
            transform: scale(0.9);
            transform-origin: top left;
        }

        .phone-speaker {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 5px;
            background: #222;
            border-radius: 10px;
            z-index: 10;
        }

        .phone-reflection {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 5;
        }

        /* --- MAP & FOOTER STYLES --- */

        .demo-map-section {
            padding: 100px 5%;
            background: #000000;
            position: relative;
        }

        .map-frame {
            width: 100%;
            height: 600px;
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            box-shadow: 0 0 50px rgba(255, 59, 48, 0.1);
            position: relative;
        }

        #demo-map {
            width: 100%;
            height: 100%;
            background: #111;
        }

        .map-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            z-index: 1000;
            color: #fff;
            min-width: 200px;
        }

        .map-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .map-stat span:last-child {
            color: var(--primary);
            font-weight: 700;
        }

        .patrol-marker-label {
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            white-space: nowrap;
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            border: 1px solid var(--glass-border);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            font-weight: 600;
        }

        .patrol-icon-inner {
            font-size: 28px;
            line-height: 1;
            filter: drop-shadow(0 0 10px rgba(255, 59, 48, 0.3));
        }

        /* Footer */
        .site-footer {
            background: #080808;
            border-top: 1px solid #222;
            padding: 80px 5% 30px;
            font-size: 0.95rem;
            color: #888;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 60px;
            margin-bottom: 60px;
        }

        .footer-col h4 {
            color: #fff;
            margin-bottom: 25px;
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .footer-bottom {
            border-top: 1px solid #222;
            padding-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>

<body>
    <!-- FULLSCREEN TRIGGER -->
    <div id="fs-trigger">
        <div class="fs-btn">
            <span class="fs-text">–ù–∞–∂–º–∏—Ç–µ<br>START</span>
        </div>
    </div>

    <!-- TURBO LOADER -->
    <div class="turbo-loader-container">
        <div class="turbo-loader-bar" id="turbo-bar"></div>
    </div>

    <!-- INTRO OVERLAY -->
    <div id="intro-overlay">
        <div class="intro-slider-wrapper">
            <div class="intro-track" id="intro-track">
                <!-- Items injected via JS -->
            </div>
        </div>
        <div class="intro-label" style="position: relative; top: 0; margin-top: 20px;">–í–´–ë–û–† –ú–û–î–£–õ–Ø</div>
    </div>

    <!-- HERO -->
    <section class="hero">
        <video autoplay muted loop playsinline class="hero-video-bg">
            <source src="PRO_LOGISTICS_PRESENTATION/video background.mp4" type="video/mp4">
        </video>
        <h1 data-aos="fade-up" data-aos-delay="400" style="position: relative; z-index: 2;">PRO LOGISTICS</h1>
        <p data-aos="fade-up" data-aos-delay="600" style="position: relative; z-index: 2;">
            –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥–æ–π —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∏, –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∞–º–∏ –∏ –∞–≤—Ç–æ–ø–∞—Ä–∫–æ–º.
            –ï–¥–∏–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –ø—Ä–æ—Ä–∞–±–∞, –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∏ –≤–æ–¥–∏—Ç–µ–ª—è.
        </p>
    </section>

    <!-- RADAR CURSOR -->
    <div id="radar-cursor">
        <div class="radar-dot"></div>
        <div class="radar-pulse"></div>
    </div>

    <!-- SIDEBAR NAVIGATION -->
    <div class="side-nav">
        <!-- Up Arrow -->
        <div class="nav-btn hidden" id="btn-up" onclick="scrollToPrevSection()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 15l-6-6-6 6" />
            </svg>
        </div>
        <!-- Down Arrow -->
        <div class="nav-btn" id="btn-down" onclick="scrollToNextSection()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 9l6 6 6-6" />
            </svg>
            <span class="nav-hint">–ù–∞–∂–º–∏—Ç–µ –≤–Ω–∏–∑</span>
        </div>
    </div>

    <!-- MOBILE SECTION (PRO FOREMAN / DRIVER) -->
    <section>
        <div class="container">
            <div class="content-text" data-aos="fade-right">
                <div class="feature-badge">üì± –ú–æ–±–∏–ª—å–Ω–∞—è –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞</div>
                <h2>–í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ <br>–Ω–∞ –æ–¥–Ω–æ–π –≤–æ–ª–Ω–µ</h2>
                <p>PRO LOGISTICS —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏ —Å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏. –ü—Ä–æ—Ä–∞–± –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏–∫—É –≤ 2 –∫–ª–∏–∫–∞,
                    –≤–æ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–∫–∞–∑ —Å –º–∞—Ä—à—Ä—É—Ç–æ–º.</p>

                <div class="feature-pill">
                    <div class="icon-box">üë∑‚Äç‚ôÇÔ∏è</div>
                    <div>
                        <strong>–î–ª—è –ü—Ä–æ—Ä–∞–±–∞</strong>
                        <div style="font-size: 0.8rem; color: #888;">–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–π —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∏ (Exavator,
                            Crane) –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–¥–∞—á–∏ –Ω–∞ –∫–∞—Ä—Ç–µ.</div>
                    </div>
                </div>

                <div class="feature-pill">
                    <div class="icon-box">üöú</div>
                    <div>
                        <strong>–î–ª—è –í–æ–¥–∏—Ç–µ–ª—è</strong>
                        <div style="font-size: 0.8rem; color: #888;">–£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤, –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–æ
                            –æ–±—ä–µ–∫—Ç–∞ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã.</div>
                    </div>
                </div>

                <div class="os-support" style="margin-top: 30px; display:flex; gap:15px; align-items:center;">
                    <!-- Android Button -->
                    <a href="#" class="app-btn">
                        <img src="PRO_LOGISTICS_PRESENTATION/images/android-svgrepo-com.svg"
                            style="height:24px; filter: invert(27%) sepia(91%) saturate(6146%) hue-rotate(354deg) brightness(97%) contrast(105%);">
                        <span>Android</span>
                    </a>
                    <!-- iOS Button -->
                    <a href="#" class="app-btn">
                        <img src="PRO_LOGISTICS_PRESENTATION/images/apple-svgrepo-com.svg"
                            style="height:24px; filter: invert(27%) sepia(91%) saturate(6146%) hue-rotate(354deg) brightness(97%) contrast(105%);">
                        <span>iOS</span>
                    </a>
                </div>

                <style>
                    .app-btn {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        background: rgba(255, 255, 255, 0.05);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        padding: 12px 24px;
                        border-radius: 12px;
                        text-decoration: none;
                        color: #ccc;
                        font-family: inherit;
                        font-weight: 500;
                        transition: all 0.3s ease;
                    }

                    .app-btn:hover {
                        background: rgba(255, 255, 255, 0.1);
                        border-color: var(--primary);
                        color: #fff;
                        transform: translateY(-2px);
                    }
                </style>
            </div>
            <div class="mockup-container floating" data-aos="fade-left" style="display: flex; justify-content: center;">
                <!-- Reduced size video to fit screen height, removed thick border -->
                <video autoplay muted loop playsinline class="mockup-img"
                    style="max-width: 300px; border: none; background: transparent; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
                    <source src="PRO_LOGISTICS_PRESENTATION/video reclame.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </section>

    <!-- INTERACTIVE ROLES SHOWCASE -->
    <section class="roles-showcase" style="padding: 100px 5%; background: #000;">
        <div class="container" style="display: flex; flex-direction: column; gap: 150px;">

            <!-- ROLE 1: FOREMAN -->
            <div class="role-block"
                style="display: flex; align-items: center; justify-content: space-between; gap: 50px; flex-wrap: wrap;">
                <div class="content-text" style="flex: 1; min-width: 300px;" data-aos="fade-right">
                    <div class="feature-badge">üë∑ –ú–æ–¥—É–ª—å –ü—Ä–æ—Ä–∞–±–∞</div>
                    <h2>–ó–∞–∫–∞–∑ —Ç–µ—Ö–Ω–∏–∫–∏ –∑–∞ 1 –º–∏–Ω—É—Ç—É</h2>
                    <p>–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫. –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –∏
                        –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞.</p>
                    <ul style="list-style: none; margin-top: 20px; color: #888;">
                        <li style="margin-bottom: 10px;">‚úÖ –ñ–∏–≤–æ–π –ø–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</li>
                        <li style="margin-bottom: 10px;">‚úÖ –ì–∏–±–∫–∏–µ —Ç–∞—Ä–∏—Ñ—ã (—á–∞—Å/—Ä–µ–π—Å)</li>
                        <li style="margin-bottom: 10px;">‚úÖ –ß–∞—Ç —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º</li>
                    </ul>
                </div>
                <div class="phone-wrapper" data-aos="zoom-in" data-aos-delay="200">
                    <div class="phone-mockup">
                        <div class="phone-speaker"></div>
                        <iframe src="PRO_LOGISTICS_PRESENTATION/foreman/index.html"></iframe>
                    </div>
                </div>
            </div>

            <!-- ROLE 2: DISPATCHER -->
            <div class="role-block"
                style="display: flex; align-items: center; justify-content: space-between; gap: 50px; flex-wrap: wrap; flex-direction: row-reverse;">
                <div class="content-text" style="flex: 1; min-width: 300px;" data-aos="fade-left">
                    <div class="feature-badge">üñ•Ô∏è –¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    <h2>–î–∏—Å–ø–µ—Ç—á–µ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å</h2>
                    <p>–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –∏ –Ω–∞–µ–º–Ω—ã–º –ø–∞—Ä–∫–æ–º. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
                        —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.</p>
                    <ul style="list-style: none; margin-top: 20px; color: #888;">
                        <li style="margin-bottom: 10px;">‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∫–æ–º –º–∞—à–∏–Ω</li>
                        <li style="margin-bottom: 10px;">‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤</li>
                        <li style="margin-bottom: 10px;">‚úÖ –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</li>
                    </ul>
                </div>
                <div class="phone-wrapper" data-aos="zoom-in" data-aos-delay="200">
                    <div class="phone-mockup">
                        <div class="phone-speaker"></div>
                        <iframe src="PRO_LOGISTICS_PRESENTATION/operator/index.html"></iframe>
                    </div>
                </div>
            </div>

            <!-- ROLE 3: DRIVER -->
            <div class="role-block"
                style="display: flex; align-items: center; justify-content: space-between; gap: 50px; flex-wrap: wrap;">
                <div class="content-text" style="flex: 1; min-width: 300px;" data-aos="fade-right">
                    <div class="feature-badge"> –ú–æ–¥—É–ª—å –ú–∞—à–∏–Ω–∏—Å—Ç–∞</div>
                    <h2>–†–∞–±–æ—Ç–∞ –±–µ–∑ –ø—Ä–æ—Å—Ç–æ–µ–≤</h2>
                    <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –º–∞—à–∏–Ω–∏—Å—Ç–æ–≤. –ü–æ–ª—É—á–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ
                        –º–∞—Ä—à—Ä—É—Ç—ã –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º –¥–æ—Ö–æ–¥–æ–º.</p>
                    <ul style="list-style: none; margin-top: 20px; color: #888;">
                        <li style="margin-bottom: 10px;">‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</li>
                        <li style="margin-bottom: 10px;">‚úÖ –£–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è</li>
                        <li style="margin-bottom: 10px;">‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</li>
                    </ul>
                </div>
                <div class="phone-wrapper" data-aos="zoom-in" data-aos-delay="200">
                    <div class="phone-mockup">
                        <div class="phone-speaker"></div>
                        <iframe src="PRO_LOGISTICS_PRESENTATION/driver/index.html"></iframe>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- MULTI-EQUIPMENT SYSTEM -->
    <section>
        <div class="container">
            <div class="content-text" data-aos="fade-up">
                <div class="feature-badge">üöú –ú—É–ª—å—Ç–∏—Ñ–æ—Ä–º–Ω–æ—Å—Ç—å</div>
                <h2>–õ—é–±–∞—è —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞<br>–≤ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ</h2>
                <p>–ï–¥–∏–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –≤–∏–¥–∞–º–∏ —Ç–µ—Ö–Ω–∏–∫–∏: –æ—Ç —ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä–æ–≤ –∏ –∫—Ä–∞–Ω–æ–≤ –¥–æ —Å–∞–º–æ—Å–≤–∞–ª–æ–≤ –∏
                    –±–µ—Ç–æ–Ω–æ–Ω–∞—Å–æ—Å–æ–≤.</p>
                <p>–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ —Å–≤–æ–π –±–∏–∑–Ω–µ—Å, –æ–±—ä–µ–¥–∏–Ω—è—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–∞—Ä–∫ –∏ —Ç–µ—Ö–Ω–∏–∫—É –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π
                    –∫–∞—Ä—Ç–µ.</p>
            </div>
            <div class="mockup-container" data-aos="fade-up" data-aos-delay="200"
                style="display:flex; justify-content:center; align-items:center;">
                <!-- New Advertising Video (Removed border) -->
                <video autoplay muted loop playsinline class="mockup-img"
                    style="max-width: 600px; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); border: none;">
                    <source src="PRO_LOGISTICS_PRESENTATION/video reclame 2.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </section>

    <!-- LIVE DEMO MAP -->
    <section class="demo-map-section">
        <div class="container" style="display: block;">
            <div class="content-text" style="text-align: center; margin-bottom: 50px;" data-aos="fade-up">
                <div class="feature-badge">üöõ Live Traffic</div>
                <h2>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∏</h2>
                <p>–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º –≤–∞—à–µ–≥–æ –ø–∞—Ä–∫–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.</p>
            </div>

            <div class="map-frame" data-aos="zoom-in">
                <div id="demo-map"></div>
                <div class="map-overlay">
                    <div class="map-stat">
                        <span>–ù–∞ –ª–∏–Ω–∏–∏:</span>
                        <span id="demo-active-patrols">5</span>
                    </div>
                    <div class="map-stat">
                        <span>–°—Ç–∞—Ç—É—Å:</span>
                        <span style="color: #ff3b30;">‚óè Online</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SCALE SECTION (Uzbekistan Map) -->
    <section>
        <div class="container">
            <div class="content-text" data-aos="fade-right">
                <div class="feature-badge">üåç –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</div>
                <h2>–†–∞–±–æ—Ç–∞–µ–º –ø–æ –≤—Å–µ–º—É –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω—É</h2>
                <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –ª—é–±—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö - –æ—Ç –¢–∞—à–∫–µ–Ω—Ç–∞ –¥–æ –ù—É–∫—É—Å–∞.</p>
            </div>
            <div class="mockup-container" data-aos="zoom-in">
                <img src="PRO_LOGISTICS_PRESENTATION/images/uz.svg" alt="Uzbekistan Map" class="mockup-img"
                    style="padding: 20px; background: rgba(255,255,255,0.02); border: 1px solid var(--glass-border); width: 80%; height: auto;">
            </div>
        </div>
    </section>

    <!-- THANK YOU SECTION -->
    <section class="hero"
        style="background: #000; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <h2 data-aos="zoom-in" style="font-size: 4rem; color: var(--primary); margin-bottom: 20px;">–°–ü–ê–°–ò–ë–û –ó–ê –í–ù–ò–ú–ê–ù–ò–ï!
        </h2>
        <p data-aos="fade-up" data-aos-delay="200" style="color: #888; font-size: 1.2rem;">PRO LOGISTICS ‚Äî –°–∏–ª–∞ –≤
            –∫–æ–Ω—Ç—Ä–æ–ª–µ</p>
        <div style="margin-top: 50px;" data-aos="fade-up" data-aos-delay="400">
            <a href="#" class="app-btn-main"
                style="border: 1px solid var(--primary); color: var(--primary); padding: 15px 40px; border-radius: 30px; text-decoration: none; font-weight: bold; transition: 0.3s; background: rgba(255, 59, 48, 0.05);">
                –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏
            </a>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="site-footer">
        <div class="footer-container">
            <!-- Col 1: Brand -->
            <div class="footer-col">
                <h3 style="color: #fff; font-size: 1rem; margin-bottom: 10px; font-weight: 600;">PRO LOGISTICS
                </h3>
                <p style="font-size: 0.9rem;">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–æ–π.</p>
            </div>
        </div>
        <div class="footer-bottom">
            <div>¬© 2026 PRO LOGISTICS</div>
            <div>–¢–∞—à–∫–µ–Ω—Ç, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ duration: 1000, once: false, mirror: true });

        // Turbo Loader Logic
        window.addEventListener('scroll', () => {
            const scrollTop = window.scrollY || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercent = (scrollTop / scrollHeight) * 100;
            document.getElementById('turbo-bar').style.width = scrollPercent + '%';
        });

        // Map Logic
        document.addEventListener('DOMContentLoaded', () => {

            // --- INTRO ANIMATION LOGIC (Horizontal Slide) ---
            const baseModules = [
                { name: "PRO BIM", icon: "layers" },
                { name: "PRO TENDER", icon: "gavel" },
                { name: "PRO ESTIMATE", icon: "calculator" },
                { name: "PRO LOGISTICS", icon: "truck" }, /* Index 3 */
                { name: "PRO SMETA", icon: "coins" },
                { name: "PRO PTO", icon: "clipboard-list" },
                { name: "PRO PLANNER", icon: "calendar-days" },
                { name: "PRO FOREMAN", icon: "user-cog" },
                { name: "PRO SECURITY", icon: "shield-check" }
            ];

            const modules = [...baseModules, ...baseModules, ...baseModules];
            // Target PRO LOGISTICS in middle set.
            // PRO LOGISTICS is index 3. Middle set starts at 9. 9+3 = 12.
            const targetIndex = 12;

            const introTrack = document.getElementById('intro-track');
            const items = [];

            // 1. Render Blocks
            modules.forEach((mod, index) => {
                const el = document.createElement('div');
                el.classList.add('intro-block');
                el.innerHTML = `<i data-lucide="${mod.icon}" style="width: 32px; height: 32px;"></i> <span>${mod.name}</span>`;
                introTrack.appendChild(el);
                items.push(el);
            });

            if (window.lucide) {
                lucide.createIcons();
            }

            // 2. Wait for User Click to Start
            const fsTrigger = document.getElementById('fs-trigger');
            fsTrigger.addEventListener('click', () => {
                const doc = document.documentElement;
                if (doc.requestFullscreen) doc.requestFullscreen();
                else if (doc.webkitRequestFullscreen) doc.webkitRequestFullscreen();

                fsTrigger.style.opacity = '0';
                setTimeout(() => fsTrigger.style.display = 'none', 500);

                // Start Animation
                setTimeout(() => {
                    const itemFullWidth = 340;
                    const getPos = (idx) => (idx * itemFullWidth) + 170;

                    // Step 1: Slide fast to index 10 (PRO ESTIMATE) - 2 steps before target
                    const indexNear = 10;
                    introTrack.style.transition = 'transform 2.0s cubic-bezier(0.2, 0.8, 0.2, 1)';
                    introTrack.style.transform = `translateX(-${getPos(indexNear)}px)`;

                    setTimeout(() => {
                        items[indexNear].classList.add('active');

                        // Step 2: "Click Right" -> Move to 11 (SMETA? No, wait sequence: Est -> Logs)
                        // Base: Estimate(2), Logistics(3). 
                        // So 10 is Estimate, 11 is Logistics? 
                        // Middle set start 9 (BIM). 9=BIM, 10=Tender, 11=Estimate, 12=Logistics.
                        // Ah, I calculated Target=12 correctly.
                        // So indexNear=10 is TENDER. index 11 is ESTIMATE. index 12 is LOGISTICS.
                        // Let's slide to 10 (Tender).

                        setTimeout(() => {
                            items[indexNear].classList.remove('active');

                            const indexStep1 = 11; // ESTIMATE
                            introTrack.style.transition = 'transform 0.4s cubic-bezier(0.2, 0, 0.2, 1)';
                            introTrack.style.transform = `translateX(-${getPos(indexStep1)}px)`;
                            items[indexStep1].classList.add('active');

                            // Step 3: Move to 12 (LOGISTICS)
                            setTimeout(() => {
                                items[indexStep1].classList.remove('active');

                                const target = 12;
                                introTrack.style.transform = `translateX(-${getPos(target)}px)`;
                                items[target].classList.add('active');

                                setTimeout(() => {
                                    const targetEl = items[target];
                                    targetEl.classList.add('pressed');

                                    setTimeout(() => {
                                        targetEl.classList.remove('pressed');

                                        setTimeout(() => {
                                            const overlay = document.getElementById('intro-overlay');
                                            overlay.style.opacity = '0';
                                            overlay.style.transform = 'scale(1.5)';
                                            overlay.style.visibility = 'hidden';

                                            setTimeout(() => {
                                                overlay.style.display = 'none';
                                                AOS.refresh();
                                            }, 800);
                                        }, 400);

                                    }, 200);

                                }, 600);

                            }, 700);

                        }, 2500);

                    }, 100);

                }, 500);

            });


            // --- MAP LOGIC (Logistics Scenario) ---
            const map = L.map('demo-map', {
                center: [41.3120, 69.2430],
                zoom: 16,
                zoomControl: false,
                attributionControl: false,
                scrollWheelZoom: false
            });

            // "Drawn" Map Style (Standard OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors',
                maxZoom: 19
            }).addTo(map);

            // Asset Icons
            const foremanIcon = L.divIcon({
                className: 'foreman-marker',
                html: `<div style="text-align:center; position:relative;">
                        <div style="font-size:32px; filter:drop-shadow(0 0 10px #00e676); animation: bounce 2s infinite;">üë∑‚Äç‚ôÇÔ∏è</div>
                       </div>`,
                iconSize: [40, 50],
                iconAnchor: [20, 25]
            });

            // Helper to create driver icons dynamically
            function createDriverIcon(color, typeName) {
                return L.divIcon({
                    className: 'driver-marker',
                    html: `<div style="text-align:center; position:relative; transition: all 0.5s;">
                            <div style="font-size:28px; filter:drop-shadow(0 0 10px ${color});">üöú</div>
                            <div style="background:${color}; color:#000; padding:2px 6px; border-radius:4px; font-size:10px; font-weight:bold; margin-top:-5px; white-space:nowrap;">${typeName}</div>
                           </div>`,
                    iconSize: [40, 50],
                    iconAnchor: [20, 25]
                });
            }

            // Locations
            const foremanLoc = [41.3140, 69.2460];

            // Drivers: 1 (Refuse), 2 (Busy), 3 (Accept)
            const d1Loc = [41.3145, 69.2440]; // Close
            const d2Loc = [41.3125, 69.2480]; // Medium
            const d3Start = [41.3090, 69.2400]; // Far

            // Render Foreman
            L.marker(foremanLoc, { icon: foremanIcon }).addTo(map);

            // Render Drivers
            let driver1 = L.marker(d1Loc, { icon: createDriverIcon('#ff3b30', 'JCB A-1') }).addTo(map);
            let driver2 = L.marker(d2Loc, { icon: createDriverIcon('#ff3b30', 'CAT B-2') }).addTo(map);
            let driver3 = L.marker(d3Start, { icon: createDriverIcon('#ff3b30', 'VOLVO C-3') }).addTo(map);

            // REALISTIC ROUTE STATE
            let routeLine = null; // Defined in correct scope
            let routePoints = [];

            // Helper to fetch real route from OSRM
            async function fetchRoute(start, end) {
                // OSRM expects: Lon,Lat;Lon,Lat
                const query = `${start[1]},${start[0]};${end[1]},${end[0]}`;
                const url = `https://router.project-osrm.org/route/v1/driving/${query}?overview=full&geometries=geojson`;

                try {
                    const response = await fetch(url);
                    const data = await response.json();
                    if (data.routes && data.routes.length > 0) {
                        // Swap to [Lat, Lng] for Leaflet
                        return data.routes[0].geometry.coordinates.map(c => [c[1], c[0]]);
                    }
                } catch (e) {
                    console.error("OSRM Error:", e);
                }
                return null;
            }

            async function runScenario() {
                // RESET
                if (routeLine) map.removeLayer(routeLine);
                // Ensure markers are on map
                if (!map.hasLayer(driver1)) driver1.addTo(map);
                if (!map.hasLayer(driver2)) driver2.addTo(map);

                driver1.setIcon(createDriverIcon('#ff3b30', 'JCB A-1'));
                driver2.setIcon(createDriverIcon('#ff3b30', 'CAT B-2'));
                driver3.setIcon(createDriverIcon('#ff3b30', 'VOLVO C-3'));
                driver3.setLatLng(d3Start);
                driver3.setOpacity(1); driver1.setOpacity(1); driver2.setOpacity(1);

                document.getElementById('demo-active-patrols').innerHTML = '<span style="color:#888;">–ü–æ–∏—Å–∫ —Ç–µ—Ö–Ω–∏–∫–∏...</span>';

                // 1. FOREMAN REQUEST
                await new Promise(r => setTimeout(r, 1000));
                const fPopup = L.popup({ closeButton: false, autoClose: false, offset: [0, -30] })
                    .setLatLng(foremanLoc)
                    .setContent('<div style="text-align:center;"><b>–ù—É–∂–µ–Ω –≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä!</b></div>')
                    .openOn(map);

                // 2. DRIVER 1 REFUSAL
                await new Promise(r => setTimeout(r, 1000));
                L.popup({ closeButton: false, autoClose: false, offset: [0, -30] })
                    .setLatLng(d1Loc)
                    .setContent('<div style="text-align:center; color:red;"><b>–û—Ç–∫–ª–æ–Ω–∏–ª</b></div>')
                    .openOn(map);

                driver1.setIcon(createDriverIcon('#555', 'Offline'));
                setTimeout(() => map.removeLayer(driver1), 1000); // Disappear

                // 3. DRIVER 2 BUSY
                await new Promise(r => setTimeout(r, 1500));
                map.closePopup();
                L.popup({ closeButton: false, autoClose: false, offset: [0, -30] })
                    .setLatLng(d2Loc)
                    .setContent('<div style="text-align:center; color:orange;"><b>–ó–∞–Ω—è—Ç</b></div>')
                    .openOn(map);

                driver2.setIcon(createDriverIcon('#555', 'Busy'));
                setTimeout(() => map.removeLayer(driver2), 1000); // Disappear

                // 4. DRIVER 3 ACCEPT
                await new Promise(r => setTimeout(r, 1500));
                map.closePopup();
                L.popup({ closeButton: false, autoClose: false, offset: [0, -30] })
                    .setLatLng(d3Start)
                    .setContent('<div style="text-align:center; color:green;"><b>–ë–µ—Ä—É –∑–∞–∫–∞–∑!</b></div>')
                    .openOn(map);

                driver3.setIcon(createDriverIcon('#ff3b30', '–í –ø—É—Ç–∏'));
                document.getElementById('demo-active-patrols').innerHTML = '<span style="color:#ff3b30;">–¢–µ—Ö–Ω–∏–∫–∞ –Ω–∞–π–¥–µ–Ω–∞!</span>';
                map.closePopup();

                await new Promise(r => setTimeout(r, 1000));

                // 5. FETCH & DRAW REAL ROUTE (ANIMATED)
                routePoints = await fetchRoute(d3Start, foremanLoc);
                if (!routePoints) routePoints = [d3Start, foremanLoc];

                // Create empty polyline
                routeLine = L.polyline([], {
                    color: '#ff3b30',
                    weight: 6,
                    opacity: 0.9,
                    lineJoin: 'round'
                }).addTo(map);

                // Zoom to fit projected route
                map.flyToBounds(L.latLngBounds(routePoints), {
                    padding: [100, 100],
                    duration: 1.5
                });

                // Snake Animation (Draw route)
                for (let i = 0; i < routePoints.length; i++) {
                    routeLine.addLatLng(routePoints[i]);
                    // Speed of drawing (faster than driving)
                    await new Promise(r => setTimeout(r, 20));
                }

                await new Promise(r => setTimeout(r, 500));
                map.closePopup(); // Close D3 popup

                // 6. ANIMATE MOVEMENT & TRAIL ERASE
                let progress = 0;
                const speed = 0.0008; // Very Slow and smooth

                function animate() {
                    progress += speed;
                    if (progress >= 1) {
                        driver3.setLatLng(foremanLoc);
                        if (routeLine) map.removeLayer(routeLine); // Clear line

                        L.popup({ closeButton: false, autoClose: false, offset: [0, -30] })
                            .setLatLng(foremanLoc)
                            .setContent('<div style="text-align:center; color:#ff3b30;"><b>–ü—Ä–∏–±—ã–ª!</b></div>')
                            .openOn(map);

                        setTimeout(() => {
                            map.closePopup();
                            runScenario(); // Loop
                        }, 5000);
                        return;
                    }

                    // Path Interpolation
                    const totalDist = routePoints.length - 1;
                    const scaled = progress * totalDist;
                    const idx = Math.floor(scaled);
                    const segProg = scaled - idx;

                    if (idx < totalDist && idx + 1 < routePoints.length) {
                        const p1 = routePoints[idx];
                        const p2 = routePoints[idx + 1];
                        const lat = p1[0] + (p2[0] - p1[0]) * segProg;
                        const lng = p1[1] + (p2[1] - p1[1]) * segProg;
                        const currentPos = [lat, lng];

                        driver3.setLatLng(currentPos);

                        // Update Route Line to show only REMAINING path
                        // Slice from next integer index + 1
                        const remaining = routePoints.slice(idx + 1);
                        // Prepend current position so line connects to vehicle
                        routeLine.setLatLngs([currentPos, ...remaining]);
                    }
                    requestAnimationFrame(animate);
                }
                animate();
            }

            runScenario();

            // --- SCROLL HELPERS (Robust) ---
            window.scrollToNextSection = function () {
                const sections = Array.from(document.querySelectorAll('section, footer'));
                const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                const target = sections.find(s => s.offsetTop > currentScroll + 50);
                if (target) {
                    window.scrollTo({ top: target.offsetTop, behavior: 'smooth' });
                }
            };

            window.scrollToPrevSection = function () {
                const sections = Array.from(document.querySelectorAll('section, footer'));
                const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                // Find highest section that is above current scroll
                let target = null;
                for (let i = sections.length - 1; i >= 0; i--) {
                    if (sections[i].offsetTop < currentScroll - 50) {
                        target = sections[i];
                        break;
                    }
                }
                if (target) {
                    window.scrollTo({ top: target.offsetTop, behavior: 'smooth' });
                } else {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };

            // Radar Cursor
            const cursor = document.getElementById('radar-cursor');
            if (cursor) {
                document.addEventListener('mousemove', (e) => {
                    cursor.style.top = e.clientY + 'px';
                    cursor.style.left = e.clientX + 'px';
                });
            }

            // Arrow Visibility
            window.addEventListener('scroll', () => {
                const btnUp = document.getElementById('btn-up');
                const btnDown = document.getElementById('btn-down');
                if (!btnUp || !btnDown) return;

                const currentScroll = window.pageYOffset || document.documentElement.scrollTop;

                if (currentScroll > 300) {
                    btnUp.classList.remove('hidden');
                } else {
                    btnUp.classList.add('hidden');
                }

                // Hide down arrow at bottom
                const isBottom = (window.innerHeight + currentScroll) >= document.body.offsetHeight - 100;
                if (isBottom) {
                    btnDown.classList.add('hidden');
                } else {
                    btnDown.classList.remove('hidden');
                }
            });
        });
    </script>
</body>

</html>