# üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –û—Ö—Ä–∞–Ω—ã –∏ –ü–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è

MVP —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ö—Ä–∞–Ω—ã —Å QR-–∫–æ–¥–∞–º–∏, GPS-—Ç—Ä–µ–∫–∏–Ω–≥–æ–º –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç.

## üì¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```bash
cp .env.example .env
```

–í–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `JWT_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT (–∏–∑–º–µ–Ω–∏—Ç–µ –≤ production!)
- `YANDEX_MAPS_API_KEY` - API –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç (–ø–æ–ª—É—á–∏—Ç–µ –Ω–∞ https://developer.tech.yandex.ru/)

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
npm run init-db
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# Development
npm run dev

# Production
npm start
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:3000`

## üîê –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã:

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- Email: `admin@example.com`
- –ü–∞—Ä–æ–ª—å: `admin123`
- URL: `http://localhost:3000/admin`

**–ö–ü–ü (—Ç–µ—Å—Ç–æ–≤—ã–π):**
- Email: `kpp@example.com`
- –ü–∞—Ä–æ–ª—å: `test123`

**–ü–∞—Ç—Ä—É–ª—å (—Ç–µ—Å—Ç–æ–≤—ã–π):**
- Email: `patrol@example.com`
- –ü–∞—Ä–æ–ª—å: `test123`

## üöÇ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Railway

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git init
git add .
git commit -m "Initial commit: Security Patrol System"
```

–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥:

```bash
git remote add origin https://github.com/your-username/security-patrol-system.git
git push -u origin main
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Railway

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [railway.app](https://railway.app/)
2. –ù–∞–∂–º–∏—Ç–µ "New Project"
3. –í—ã–±–µ—Ä–∏—Ç–µ "Deploy from GitHub repo"
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL

1. –í –ø—Ä–æ–µ–∫—Ç–µ Railway –Ω–∞–∂–º–∏—Ç–µ "New"
2. –í—ã–±–µ—Ä–∏—Ç–µ "Database" ‚Üí "PostgreSQL"
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```
NODE_ENV=production
JWT_SECRET=your-very-secure-secret-key-here
YANDEX_MAPS_API_KEY=your-yandex-api-key
PORT=3000
QR_RADIUS_METERS=50
TZ=Asia/Tashkent
```

### –®–∞–≥ 5: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### –®–∞–≥ 6: –ü–æ–ª—É—á–µ–Ω–∏–µ URL

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Railway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≤–∞–º –ø—É–±–ª–∏—á–Ω—ã–π URL –≤–∏–¥–∞:
`https://your-app.up.railway.app`

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

URL: `/admin`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìä –î–∞—à–±–æ—Ä–¥ —Å –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- üó∫Ô∏è –ö–∞—Ä—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–∞—Ç—Ä—É–ª—è–º–∏
- üìã –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- üìç –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏ + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤
- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
- üóìÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

URL: `/`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üì± –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–π —Å–º–µ–Ω—ã
- üèÉ –ù–∞—á–∞–ª–æ/–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–ª—è –ø–∞—Ç—Ä—É–ª–µ–π)
- üì∑ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–æ–≤
- üó∫Ô∏è –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–π –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –∫–∞—Ä—Ç–µ (–¥–ª—è –ø–∞—Ç—Ä—É–ª–µ–π)
- üìú –ò—Å—Ç–æ—Ä–∏—è —Å–≤–æ–∏—Ö —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
security-patrol-system/
‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ë–î)
‚îú‚îÄ‚îÄ middleware/          # Middleware (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ routes/              # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth.js         # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ checkpoints.js  # –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ employees.js    # –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ gps.js          # GPS —Ç—Ä–µ–∫–∏–Ω–≥
‚îÇ   ‚îú‚îÄ‚îÄ scans.js        # –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ shifts.js       # –°–º–µ–Ω—ã
‚îú‚îÄ‚îÄ scripts/            # –£—Ç–∏–ª–∏—Ç—ã (init-db.js)
‚îú‚îÄ‚îÄ public/             # –§—Ä–æ–Ω—Ç–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ css/           # –°—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ js/            # JavaScript
‚îÇ   ‚îú‚îÄ‚îÄ index.html     # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ admin.html     # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îú‚îÄ‚îÄ server.js          # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
‚îî‚îÄ‚îÄ package.json       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```

## üîß API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- `GET /api/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏
- `GET /api/checkpoints` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ—á–µ–∫
- `GET /api/checkpoints/:id` - –û–¥–Ω–∞ —Ç–æ—á–∫–∞
- `POST /api/checkpoints` - –°–æ–∑–¥–∞—Ç—å —Ç–æ—á–∫—É (–∞–¥–º–∏–Ω)
- `PUT /api/checkpoints/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ—á–∫—É (–∞–¥–º–∏–Ω)
- `DELETE /api/checkpoints/:id` - –£–¥–∞–ª–∏—Ç—å —Ç–æ—á–∫—É (–∞–¥–º–∏–Ω)
- `GET /api/checkpoints/:id/qrcode` - –ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥

### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `GET /api/scans` - –ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- `POST /api/scans/scan` - –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥
- `GET /api/scans/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### GPS –¢—Ä–µ–∫–∏–Ω–≥
- `POST /api/gps/session/start` - –ù–∞—á–∞—Ç—å –ø–∞—Ç—Ä—É–ª—å
- `POST /api/gps/session/end` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–∞—Ç—Ä—É–ª—å
- `POST /api/gps/track` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- `GET /api/gps/tracks` - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–∫–æ–≤
- `GET /api/gps/active` - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ç—Ä—É–ª–∏ (–∞–¥–º–∏–Ω)

### –°–º–µ–Ω—ã
- `GET /api/shifts` - –°–ø–∏—Å–æ–∫ —Å–º–µ–Ω
- `GET /api/shifts/current` - –¢–µ–∫—É—â–∞—è —Å–º–µ–Ω–∞
- `POST /api/shifts` - –°–æ–∑–¥–∞—Ç—å —Å–º–µ–Ω—É (–∞–¥–º–∏–Ω)
- `PUT /api/shifts/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Å–º–µ–Ω—É (–∞–¥–º–∏–Ω)
- `DELETE /api/shifts/:id` - –£–¥–∞–ª–∏—Ç—å —Å–º–µ–Ω—É (–∞–¥–º–∏–Ω)
- `POST /api/shifts/bulk` - –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ–Ω (–∞–¥–º–∏–Ω)

### –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
- `GET /api/employees` - –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–∞–¥–º–∏–Ω)
- `GET /api/employees/:id` - –û–¥–∏–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
- `POST /api/employees` - –°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–∞–¥–º–∏–Ω)
- `PUT /api/employees/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- `DELETE /api/employees/:id` - –£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–∞–¥–º–∏–Ω)

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ Bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ –ì–µ–æ—Ñ–µ–Ω—Å–∏–Ω–≥ –¥–ª—è QR-–∫–æ–¥–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–¥–∏—É—Å–∞)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–º–µ–Ω—ã –ø–µ—Ä–µ–¥ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ Role-based access control (RBAC)

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

PostgreSQL —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:

- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `checkpoints` - –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å QR-–∫–æ–¥–∞–º–∏
- `scans` - –ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- `shifts` - –°–º–µ–Ω—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `gps_tracks` - GPS —Ç—Ä–µ–∫–∏ –ø–∞—Ç—Ä—É–ª–µ–π
- `patrol_sessions` - –°–µ—Å—Å–∏–∏ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è

## üì± –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**Backend:**
- Node.js + Express
- PostgreSQL
- JWT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Bcrypt –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- QRCode –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–æ–≤
- Geolib –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π

**Frontend:**
- Vanilla JavaScript (ES6+)
- Yandex Maps API
- Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- Modern CSS with animations

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
